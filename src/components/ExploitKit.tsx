
import React, { useState, useEffect, useRef } from 'react';

const ExploitKit: React.FC = () => {
  const [input, setInput] = useState('');
  const [logs, setLogs] = useState<string[]>([]);
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    scrollRef.current?.scrollTo({ top: scrollRef.current.scrollHeight, behavior: 'smooth' });
  }, [logs]);

  const menuItems = [
    { id: "01", label: "Meterpreter Reverse TCP Injection using Powershell" },
    { id: "02", label: "Download and Execute Backdoor" },
    { id: "03", label: "Get Credential information With Mimikatz [ Send to gmail ]" },
    { id: "04", label: "Retrieve lots of passwords stored on a local computer [ gmail ]" },
    { id: "05", label: "Payload Prank for attack computer [ Fun with Windows ]" },
    { id: "06", label: "Payload to Manage Windows [ add user, rdp enable, telnet ]" },
    { id: "07", label: "Attacking Windows [ At your Own Risk ]" },
    { id: "08", label: "Help and Tutorials" },
    { id: "09", label: "Credits" },
    { id: "10", label: "Exit" }
  ];

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!input.trim()) return;

    const cmd = input.trim();
    setLogs(prev => [...prev, `Initiate@Brutal: >> ${cmd}`]);
    
    // Simulate logic
    const selected = menuItems.find(m => m.id === cmd.padStart(2, '0'));
    if (selected) {
      setLogs(prev => [...prev, `[!] Loading Module: ${selected.label}...`, `[+] Establishing tunnel to target endpoint...`, `[+] Payload delivered. Awaiting callback.`]);
    } else if (cmd.toLowerCase() === 'help') {
       setLogs(prev => [...prev, `Enter a number from 01-10 to select a module.`]);
    } else {
       setLogs(prev => [...prev, `Error: Unknown directive '${cmd}'. Use numeric index.`]);
    }
    
    setInput('');
  };

  return (
    <div className="flex-1 bg-[#1a1a1a] text-[#cccccc] font-mono p-4 lg:p-8 flex flex-col overflow-hidden relative border-2 border-white/5">
      {/* Scrollable Content Container */}
      <div ref={scrollRef} className="flex-1 overflow-y-auto scrollbar-thin pr-4 flex flex-col">
        
        {/* Header ASCII Art and Metadata Section */}
        <div className="relative mb-8 flex flex-col lg:flex-row justify-between items-start gap-4">
          <div className="flex flex-col">
            {/* Skull ASCII */}
            <pre className="text-[7px] leading-[7px] text-white opacity-90 font-bold mb-4">
{`                  _..._
                .'     '.
               /  _   _  \\
              |  (o) (o)  |
              |   _   _   |
               \\  '---'  /
                '._____.'
               /         \\
              /           \\
             /             \\
            /  /         \\  \\
           /  /           \\  \\
          /  /             \\  \\
         /  /               \\  \\
        /  /                 \\  \\
       /  /                   \\  \\`}
            </pre>
            {/* Logo ASCII */}
            <pre className="text-blue-400 text-[10px] leading-tight font-black">
{`   ____             _         _ 
  | __ ) _ __ _   _| |_  __ _| |
  |  _ \\| '__| | | | __|/ _\` | |
  | |_) | |  | |_| | |_| (_| | |
  |____/|_|   \\__,_|\\__|\\__,_|_|
                                `}
            </pre>
          </div>

          <div className="flex flex-col border-l-2 border-dashed border-blue-400/30 pl-6 text-sm py-2">
            <div className="flex gap-4 mb-1">
               <span className="text-white font-bold w-32">| Brutal Created By</span>
               <span className="text-red-500">: User_X ( Screetsec )</span>
            </div>
            <div className="flex gap-4 mb-1">
               <span className="text-white font-bold w-32">| Version</span>
               <span className="text-red-500">: 1.0</span>
            </div>
            <div className="flex gap-4 mb-1">
               <span className="text-white font-bold w-32">| Codename</span>
               <span className="text-red-500">: Reaper</span>
            </div>
            <div className="flex gap-4 mb-1">
               <span className="text-white font-bold w-32">| Follow on Github</span>
               <span className="text-red-500">: @Screetsec</span>
            </div>
            <div className="flex gap-4">
               <span className="text-white font-bold w-32">| Dracos Linux</span>
               <span className="text-red-500">: dracos-linux.org</span>
            </div>
          </div>
        </div>

        {/* Separator */}
        <div className="w-full border-t border-blue-400/20 mb-8 border-dashed"></div>

        {/* Menu Section */}
        <div className="flex flex-col gap-1.5 mb-10 pl-4">
           {menuItems.map((item) => (
             <div key={item.id} className="flex gap-6 group cursor-pointer hover:bg-white/5 py-0.5 rounded transition-colors">
                <span className="text-[#00ff41] font-bold">[{item.id}]</span>
                <span className="text-cyan-400 font-bold group-hover:text-white transition-colors">{item.label}</span>
             </div>
           ))}
        </div>

        {/* Log History */}
        <div className="mt-auto space-y-1 text-xs opacity-60 italic mb-4">
           {logs.map((log, i) => (
             <div key={i} className={log.includes('!') ? 'text-yellow-500' : log.includes('Initiate') ? 'text-red-400 font-bold' : ''}>
               {log}
             </div>
           ))}
        </div>
      </div>

      {/* Persistent Bottom Prompt */}
      <form onSubmit={handleSubmit} className="h-12 border-t border-white/10 pt-4 flex gap-4 items-center">
         <span className="text-red-500 font-black text-sm whitespace-nowrap">Initiate@Brutal: &gt;&gt;</span>
         <input 
           type="text"
           value={input}
           onChange={(e) => setInput(e.target.value)}
           className="flex-1 bg-transparent border-none outline-none text-[#00ff41] font-bold tracking-widest text-sm"
           autoFocus
           placeholder="..."
         />
         <div className="w-2.5 h-5 bg-[#00ff41] animate-pulse"></div>
      </form>
    </div>
  );
};

export default ExploitKit;
